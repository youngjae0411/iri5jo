<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous" />
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-cookie/1.4.1/jquery.cookie.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM"
        crossorigin="anonymous"></script>

    <title>화이팅</title>
</head>

<body>
    <form class="">
        <div calss="form-flationg mb-3">
            <input type="text" class="form-control id_confirm" id="signup_id" name="id" placeholder="아이디" />
            <div id="id_div"></div>
        </div>
    </form>
</body>

<script type="text/JavaScript">
     $(document).ready(function(){

         $(".id_confirm").on("focusout", function(){
             var id = $('input[name=id]').val();

             // 빈 값 체크
             if(id == '' || id.length == 0){
                 alert("아이디를 입력해주세요.");
                 return false;
             }

             // 길이 체크
             if(id.length < 5) {
                 alert("아이디를 5글자 이상 입력해주세요.");
                 return false;
             }


             $.ajax({
                 url : "http://localhost:5000/api/register/confirm",
                 type : "POST",
                 data : { id : id },
                 success: function (response) {
                     console.log(response)

                    if(response.id == false ){
                        $('#id_div').html('<a style="color:gray;" > 사용 가능한 아이디 입니다. </a>')
                    } else {
                        $('#id_div').html('<a style="color:red;" > 사용 불가능한 아이디 입니다. </a>')
                    }
                }
            })

                 .fail(function(xhr, status, errorThrown){
                     console.log("Ajax 실패 : " + errorThrown);
                     $('#id_div').html('<a style="color:red;" > 통신 중 오류가 발생하였습니다. </a>')
                 })
             })
         })
  </script>

</html>